Rolle:
Du bist ein sehr erfahrener Profi-Softwareentwickler und Game-Architekt.
Ich bin dein Schüler mit wenig Erfahrung.
Du erklärst klar, strukturiert, praxisnah und ohne unnötigen Ballast.

Ziel:
Wir entwickeln eine server-autoritäre Multiplayer-Web-App für das Kartenspiel Schnapsen (2 Spieler).

Grundanforderungen:
- Plattform: Mobile Browser (Android / iOS)
- Layout: Responsive, Landscape-Modus erzwingen
- Frontend: HTML, CSS, JavaScript
- Backend: Node.js + Express
- Realtime-Kommunikation: WebSockets (Socket.IO)
- Hosting lokal: http://localhost:3000
- Später skalierbar für Cloud-Hosting

Multiplayer & Lobby:
- Lobby-System mit Raumcode
- Raumcode: 5 Zeichen, nur A–Z (Großbuchstaben)
- Maximal 2 Spieler pro Raum
- Keine Zuschauer erlaubt
- Spielername: 3–12 Zeichen, nur Buchstaben, keine Emojis
- Reconnect-Zeit: 60 Sekunden
- Während Reconnect: Gegner sieht "Spieler reconnectet..."
- Nach Timeout: Aufgabe → Gegner erhält 1 Bummerl

Server-Autorität:
- 100 % server-autoritär
- Client sendet nur Aktionen
- Server prüft Regeln, Spielzustände und Zeitlimits

Spiel-State-Machine:
- LOBBY
- WAITING_FOR_PLAYER
- DEALING
- PLAYER_TURN
- WAITING_FOR_RECONNECT
- GAME_OVER

Schnapsen-Spielregeln (vereinfachte Version):
- 2 Spieler, 20 Karten
- Jeder Spieler erhält 5 Karten
- Trumpf = letzte Karte im Talon
- Solange Talon vorhanden:
  - Kein Stichzwang
- Talon leer:
  - Farbzwang
- Trumpfwechsel:
  - Jederzeit im eigenen Zug
  - Nur solange Talon nicht leer
- Hochzeit:
  - Pflichtansage zu Stichbeginn
  - Zählt erst nach gewonnenem Stich
  - 20 Punkte (König + Ober)
  - 40 Punkte (Trumpf-König + Trumpf-Ober)
- Punkteanzeige:
  - Nur eigene Punkte sichtbar

Spielende & Bummerl:
- Ein Spiel endet bei:
  - 66 Punkten ODER
  - Talon leer
- Bummerl-Vergabe:
  - Gegner > 33 Punkte → 1 Bummerl
  - Gegner < 33 Punkte → 2 Bummerl
  - Gegner = 0 Punkte → 3 Bummerl (Schneider)
- Match-Ende bei 7 Bummerl
- Startspieler wechselt nach jedem Spiel
- Neues Spiel startet über Button ("Neues Spiel")

Timeouts:
- Spieler hat 60 Sekunden pro Aktion
- Timeout = Aufgabe
- Gegner gewinnt automatisch

Bedienung:
- Karte antippen → sofort spielen
- Talon und Ablagestapel für beide sichtbar

Assets & Karten:
- Kartenformate: .png, .jpg, .webp
- Einheitliche Dateinamen (kleinbuchstaben + underscore)
  Beispiel: herz_ass.png, eichel_ober.webp
- Kartenlogik strikt getrennt von Assets
- Struktur:
  /assets/cards/doppeldeutsch/
  /assets/cards/franzoesisch/
- Kartensätze pro Raum umschaltbar
- Kartenrücken vorerst fix

Entwicklungsstrategie:
- Schrittweise Entwicklung
- Zuerst Backend + Spiellogik
- Dann Frontend-Anbindung
- Klare Trennung von Game-Logic, Netzwerk und UI
- Fokus auf saubere Architektur statt Featurespam

Aufgabe:
Beginne mit:
1. Projektstruktur
2. Basis-Express-Server
3. WebSocket-Setup
4. Raum- & Spielerverwaltung
5. Game-State-Machine (ohne UI)
----------------------------------------------
1. Erweiterte Spielregeln (Priorität: Hoch)
Derzeit fehlt noch die spezifische Logik, die Schnapsen so taktisch macht.

20er / 40er Ansagen: Implementierung der Logik, um 20 Punkte (oder 40 bei Trumpf) anzusagen, wenn man König und Dame der gleichen Farbe hält und am Zug ist.
Trumpf austauschen (Der Bube): Ein Spieler, der den Trumpf-Buben hält, sollte diesen gegen die offene Trumpfkarte austauschen können, sofern er am Zug ist.
Talon zudrehen: Ein Spieler sollte die Möglichkeit haben, den Talon zu "schließen". Ab diesem Moment werden keine Karten mehr nachgezogen.
Farb- und Stichzwang: Sobald der Talon leer ist oder zugedreht wurde, muss das Spiel strengere Regeln anwenden:
Farbzwang (Bedienpflicht).
Stichzwang (Man muss stechen, wenn man bedienen kann). Aktuell prüft der Code dies noch nicht konsequent.
2. UI/UX Erweiterungen (Priorität: Mittel)
Das Frontend muss diese neuen Aktionen unterstützen.

Buttons für Aktionen: "20er/40er ansagen", "Trumpf tauschen", "Zudrehen".
Visuelles Feedback: Anzeigen, wenn der Talon geschlossen ist (z.B. Grafik ändert sich, Stapel wird gesperrt).
Bessere Spielstandsanzeige: Detailliertere Anzeige, warum Punkte vergeben wurden (z.B. "+40 für Ansage").



---------------------------------------------

Antigravity

 ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
  ➜  press h + enter to show help

npm create vite@latest schnapsen-royal
npm install
npm run dev
http://localhost:3000/

 lade die Seite neu - am besten mit STRG + F5

beim zudrehen Verbindung verloren

