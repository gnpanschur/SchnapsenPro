<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Schnapsen Multiplayer</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="app">
        <div id="landscape-warning" style="display: none;">
            <div class="message">
                <h1>Bitte Ger√§t drehen ‚Üª</h1>
                <p>Das Spiel ist f√ºr den Querformat-Modus optimiert.</p>
            </div>
        </div>
        <h1>Schnapsen f√ºr 2</h1>

        <div id="lobby">
            <input type="text" id="playerName" placeholder="Dein Name (A-Z)" maxlength="12" style="font-size: 2em;">
            <br><br>
            <button id="createBtn" style="font-size: 2em;">Raum erstellen</button>
            <br><br>
            <input type="text" id="roomCode" placeholder="Raumcode (5 Zeichen)" maxlength="5"
                style="text-transform: uppercase; font-size: 2em;">
            <button id="joinBtn" style="font-size: 2em;">Raum beitreten</button>
            <br><br>
            <button id="infoBtn"
                style="background-color: #2196F3; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; font-size: 1.8em;">‚ÑπÔ∏è
                Info</button>
        </div>

        <div id="game" style="display: none;">
            <div class="header">
                <h2><span style="color: #eef10a;">RAUMCODE: </span> <span id="currentRoom"></span> <button id="exitBtn"
                        class="exit-btn">EXIT</button> <button id="infoBtnGame" class="exit-btn"
                        style="background-color: #2196F3; margin-left: 5px;">‚ÑπÔ∏è</button></h2>
                <div id="status" style="font-size: 0.8em; margin-bottom: 5px;">Connecting...</div>
                <div id="gameStatus">Warte auf Gegner...</div>
                <div id="turn-indicator" style="font-size: 1.1em; font-weight: bold; margin-top: 5px; color: #ffd700;">
                </div>
                <div id="trump-indicator" style="font-size: 1.1em; font-weight: bold; margin-top: 5px; color: white;">
                </div>
                <button id="nextRoundBtn"
                    style="display: none; margin-top: 10px; padding: 10px 20px; font-size: 1.2em; background-color: #4CAF50; color: white; border: none; cursor: pointer;">Neu
                    geben</button>
            </div>

            <div id="game-board" class="hidden">
                <div id="opponent-area" class="player-area">
                    <div class="player-name" id="opponent-name">Gegner</div>
                    <div id="opponent-hand" class="hand"></div>
                    <div id="score-board" style="font-size: 1.2em; margin: 10px 0;">
                        <span id="my-score-container"
                            style="padding: 5px; border-radius: 5px; transition: all 0.3s;"><span
                                id="my-name-display">Du</span>: <span id="my-points">0</span> (<span
                                id="my-bummerl">0</span>) <span style="color: #FFD700; font-weight: bold;">[<span
                                    id="my-matches">0</span>]</span></span>
                        <span style="margin: 0 10px;">|</span>
                        <span id="opp-score-container"
                            style="padding: 5px; border-radius: 5px; transition: all 0.3s;"><span
                                id="opp-name-display">Gegner</span>: ??? (<span id="opponent-bummerl">0</span>) <span
                                style="color: #FFD700; font-weight: bold;">[<span
                                    id="opponent-matches">0</span>]</span></span>
                    </div>
                </div>

                <div id="table-area">
                    <div id="announcements-container"></div>
                    <div id="talon-container">
                        <div id="talon-stack" class="card-back"></div>
                        <div id="trump-card"></div>
                    </div>

                    <div id="trick-area"></div>
                    <div id="my-tricks-container"></div>
                </div>

                <!-- First Tricks Display (Moved out of table-area to avoid transform issues) -->
                <!-- Opponent's First Trick (Top Right on Desktop, Bottom Right on Mobile) -->
                <div id="opp-first-trick-container" style="
                    position: absolute; 
                    right: 20px; 
                    top: 20px; 
                    display: none; 
                    flex-direction: column; 
                    align-items: center; 
                    gap: 5px;
                ">
                    <div style="font-size: 0.8em; color: #fff;">1. Stich (Gegner)</div>
                    <div id="opp-first-trick-cards" style="display: flex; gap: 5px;"></div>
                </div>



                <div id="player-area" class="player-area">
                    <div id="controls-container" style="text-align: center; margin-bottom: 0px; min-height: 30px;">
                        <button id="exchangeBtn" class="action-btn"
                            style="display: none; background-color: #2196F3;">Trumpf tauschen</button>
                        <button id="announceBtn" class="action-btn"
                            style="display: none; background-color: #ff9800;">20er / 40er Ansagen</button>
                        <button id="closeTalonBtn" class="action-btn"
                            style="display: none; background-color: #d32f2f;">Talon zudrehen</button>
                    </div>
                    <div class="player-name" id="my-player-label">Du</div>
                    <div id="player-hand" class="hand"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal-content">
            <p>Willst du wirklich zudrehen?</p>
            <div class="modal-buttons">
                <button id="confirm-yes" class="modal-btn yes">‚úÖ</button>
                <button id="confirm-no" class="modal-btn no">‚ùå</button>
            </div>
        </div>
    </div>

    <!-- --------------Info Text -->
    <div id="info-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
            <h2 style="margin-top: 0;">‚ÑπÔ∏è Schnapsen - Spielregeln</h2>

            <h3 style="color: yellow;">Spiel starten:</h3>
            <p>‚Ä¢ 1. Gib deinen Namen ein</p>
            <p>‚Ä¢ 2. Raum erstellen</p>
            <p>‚Ä¢ 3. RAUMCODE dem Mitspieler mitteilen</p>

            <p style="color: yellow;">‚Ä¢ 4. Mitspieler:</p>
            <p>‚Ä¢ 5. Name eingeben</p>
            <p>‚Ä¢ 6. erhaltenen RAUMCODE eingeben</p>
            <p>‚Ä¢ 7. Raum beitreten</p>
            <p>Ab geht die Post üòä</p>
            <p>----------------------------------- </p>




            <h3 style="color: yellow;">Spielverlauf:</h3>
            <p>‚Ä¢ Ziel: Erreiche als Erster 66 Punkte oder gewinne den letzten Stich</p>
            <p>‚Ä¢ Der Spieler mit 7 Bummerl-Punkten gewinnt das Match</p>

            <h3>Punkte (<span style="color: #FFD700;">[Matches]</span>)</h3>
            <p>‚Ä¢ <strong>7:0 Schneider</strong> ‚Üí +2 Punkte üèÜ</p>
            <p>‚Ä¢ <strong>7:X Bummerl</strong> ‚Üí +1 Punkt</p>

            <h3>Aktionen</h3>
            <p><strong>20er/40er Ansagen:</strong> Wenn du K√∂nig und Dame einer Farbe haben</p>
            <p><strong>Trumpf tauschen:</strong> Mit Trumpf-Buben die Trumpfkarte tauschen</p>
            <p><strong>Talon zudrehen:</strong> Strenge Regeln aktivieren (Farb- & Stichzwang)</p>

            <h3>Kartenwerte</h3>
            <p>Ass: 11 | Zehn: 10 | K√∂nig: 4 | Dame: 3 | Bube: 2</p>
            <p>----------------------------------- </p>
            <p>Game Design & Entwicklung: G√ºnter Panschur.</p>

            <button id="close-info-btn"
                style="margin-top: 20px; padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1em;">Schlie√üen</button>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Spiel beendet.</h3>
            <p id="game-over-message">M√∂chtest du eine Revanche starten oder das Spiel verlassen?</p>
            <div class="modal-actions">
                <button id="revanche-btn" class="modal-btn confirm" style="background-color: #4CAF50;">Revanche</button>
                <button id="exit-game-btn" class="modal-btn cancel" style="background-color: #f44336;">EXIT</button>
            </div>
        </div>
    </div>

    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>